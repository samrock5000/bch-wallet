import {
  component$,
  useContext,
  useSignal,
  useStore,
  useTask$,
  useVisibleTask$,
} from "@builder.io/qwik";
// import HdKey from "~/components/mnemonic/create";
// import HdKey from "~/components/hdkey/hdkey";
// import Wallet from "../components/wallet/wallet";
// import ContextProvider /*,  { SomeComp }  */ from "../context/context";
import Send from "~/components/send/send";
import Token from "~/components/tokens/tokens";
// import History from "~/components/history/history";
import Mnemonic from "~/components/mnemonic/mnemonic";
import NetworkSelect from "~/components/network/network";
import { ContextSuccess, UrlContext, WalletContext } from "./layout";
import { listen } from "@tauri-apps/api/event";
import { WalletInit } from "~/components/utils/utils";

export default component$(() => {
  const contextSet = useContext(ContextSuccess);

  const walletExist = useSignal(contextSet.walletExist);
  const active = useSignal(walletExist.value ? "send" : "config");
  // console.log("WTF", walletExist.value);
  // const networkSet = useContext(UrlContext);
  useTask$(({ track }) => {
    track(() => walletExist.value);
  });

  useVisibleTask$(async ({ track }) => {
    track(() => contextSet.rdy);
    track(() => walletExist.value);
    console.log("contextSet ", contextSet);
    console.log("active.value ", active.value);
  });
  return (
    <>
      <div class={`${active.value == "send" ? "" : "hidden"}`}>
        {walletExist.value ? (
          <>
            <Send />
            <Token />
          </>
        ) : (
          <>
            <Send />
            <Token />
          </>
        )}
      </div>
      <div class={`${active.value == "config" ? "" : "hidden"}`}>
        <>
          <NetworkSelect />
          <Mnemonic />
        </>
      </div>

      <div class="btm-nav btm-nav-xs">
        <button
          // disabled={!walletExist.value ? true : false}
          onClick$={() => (active.value = "send")}
          class={`text-primary ${active.value == "send" ? "active" : ""}`}
        >
          {icons.send}
        </button>
        <button
          onClick$={() => (active.value = "config")}
          class={`text-primary ${active.value == "config" ? "active" : ""}`}
        >
          {icons.config}
        </button>
      </div>
    </>
  );
});

export const icons = {
  home: (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-5 w-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
      />
    </svg>
  ),
  send: (
    <svg
      fill="none"
      class="h-5 w-5"
      viewBox="0 0 32 32"
      xmlns="http://www.w3.org/2000/svg"
      stroke="currentColor"
    >
      <title>send</title>
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M0 16l12 4 4 12 16-32zM14.016 18.016l12-12-10.016 17.984z"
      ></path>
    </svg>
  ),
  config: (
    <svg
      height="32"
      width="32"
      version="1.1"
      id="Layer_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 507.745 507.745"
      xml:space="preserve"
      fill="currentColor"
      stroke="currentColor"
    >
      <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
      <g
        id="SVGRepo_tracerCarrier"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></g>
      <g id="SVGRepo_iconCarrier">
        {" "}
        <path
          style="fill:none;"
          d="M211.681,303.905c-0.4-4-4-7.6-8.4-7.6h-12c-0.8,0-1.6-0.4-2-1.6c-3.2-12-9.2-23.2-17.6-32.8 c-0.4-0.8-0.8-1.6,0-2.4l6.8-10c2.4-3.2,1.6-8.4-1.6-11.2l-4.8-4c-3.2-2.4-8.4-2.4-11.2,0.4l-8.4,8.8c-0.8,0.8-1.6,0.8-2.4,0.4 c-10.8-6.4-22.8-10-35.2-10.8c-0.8,0-1.6-0.8-2-1.6l-2-12c-0.8-4-4.8-7.2-8.8-6.8l-6,0.4c-4,0.4-7.6,4-7.6,8.4v12.4 c0,0.8-0.4,1.6-1.6,2c-12,3.2-23.2,9.2-32.8,17.2c-0.8,0.4-1.6,0.8-2.4,0l-10-6.8c-3.2-2.4-8.4-1.6-11.2,1.6l-4,4.8 c-2.8,3.2-2.4,8.4,0.4,11.2l8.8,8.4c0.8,0.8,0.8,1.6,0.4,2.4c-6.4,10.8-10,23.2-10.8,35.6c0,0.8-0.8,1.6-1.6,2l-11.6,2 c-4,0.8-7.2,4.8-6.8,8.8l0.4,6c0.4,4,4,7.6,8,7.6h12c0.8,0,1.6,0.4,2,1.6c3.2,12,9.2,23.6,17.6,33.2c0.4,0.8,0.8,1.6,0,2.4l-6.8,9.6 c-2.4,3.6-1.6,8.4,1.6,11.2l4.8,4c3.2,2.4,8.4,2.4,11.2-0.4l8-8.4c0.4-0.4,0.8-0.4,1.6-0.4c0.4,0,0.8,0,0.8,0.4 c11.2,6.4,23.2,10,36,11.2c0.8,0,1.6,0.8,2,1.6l2,11.2c0.8,4,4.8,7.2,8.8,6.8l6-0.4c4-0.4,7.6-4,7.6-8.4v-11.6c0-0.8,0.4-1.6,1.6-2 c12.4-3.2,23.6-9.2,33.2-17.6c0.8-0.4,1.6-0.8,2.4,0l9.6,6.8c3.2,2.4,8.4,1.6,11.2-1.6l4-4.8c2.8-3.2,2.4-8.4-0.8-11.2l-8.4-8 c-0.8-0.8-0.8-1.6-0.4-2.4c6.4-10.8,10-23.2,10.8-35.6c0-0.8,0.8-1.6,1.6-2l11.6-2c4-0.8,7.2-4.8,6.8-8.8L211.681,303.905z M69.681,320.705c-2-22,14-41.6,36-43.6c1.2,0,2.4,0,4,0c20.8,0,37.6,15.6,39.6,36c1.2,10.8-2,21.2-8.8,29.2 c-6.8,8.4-16.4,13.2-27.2,14.4C90.881,359.105,71.681,342.705,69.681,320.705z"
        ></path>{" "}
        <path
          style="fill:none;"
          d="M501.681,214.305c-0.4-6-6-12-12-12l-16.8-0.4l0,0c-0.8,0-1.6,0-2-0.8c-4.4-16.8-13.2-32.4-24.4-45.2 c-0.4-0.8-0.8-1.6,0-2.4l9.6-13.6c3.6-5.2,2.4-12.4-2.4-16.4l-6.4-5.2c-4.4-3.6-12.4-3.2-16.4,0.8l-12,12c-0.8,0.8-1.6,0.8-2.4,0.4 c-15.2-8.8-32-14-49.6-15.2c-0.8,0-1.6-0.8-2-1.6l-2.8-16.8c-1.2-6-7.2-10.4-13.2-10l-8.4,0.8c-6,0.4-11.2,6-11.2,12.4l0.4,17.2 c0,0.8-0.4,1.6-1.6,2c-16.8,4.4-32.4,12.8-45.6,24c-0.8,0.4-1.6,0.8-2.4,0l-14-9.6c-4.8-3.2-12.8-2.4-16.4,2.4l-5.2,6.4 c-4,4.8-3.6,12.4,0.8,16.4l12,11.6c0.8,0.8,0.8,1.6,0.4,2.4c-8.8,15.2-14,32.4-15.2,49.6c0,0.8-0.8,1.6-1.6,2l-16.4,2.8 c-6,1.2-10.4,7.2-10,13.2l0.8,8.4c0.4,6,6,9.6,12,9.6h16.8l0,0c0.8,0,1.6,0.4,1.6,1.6c4.4,16.8,12.8,33.6,24.4,47.2 c0.4,0.8,0.8,2,0,2.8l-9.2,13.6c-3.6,5.2-2.4,12.4,2.4,16.4l6.4,5.2c4.4,3.6,12.4,3.2,16.4-0.8l11.2-11.6c0.4-0.4,0.8-0.4,1.6-0.4 c0.4,0,0.8,0,1.2,0.4c15.2,8.8,32.8,14.4,50,15.6c0.8,0,1.6,0.8,2,1.6l2.8,15.6c1.2,6,7.2,10.4,13.2,10l8.4-0.8 c6-0.4,11.2-6,11.2-12.4l-0.4-16c0-0.8,0.4-1.6,1.6-2c17.2-4.4,32.8-12.8,46.4-24.8c0.8-0.4,1.6-0.8,2.4,0l13.2,9.2 c4.8,3.6,12.8,2.4,16.4-2.4l5.2-6.4c4-4.8,3.6-12-0.8-16.4l-11.6-11.2c-0.8-0.8-0.8-1.6-0.4-2.4c8.8-15.2,14-32.4,15.2-50 c0-0.8,0.8-1.6,1.6-2l16-2.8c6-1.2,10.8-7.2,10-13.2L501.681,214.305z M422.481,192.305c10.8,17.2,14.4,37.2,10,57.2 c-4.4,19.6-16.4,36.4-33.2,47.2c-17.2,10.8-37.2,14.4-57.2,10s-36.4-16.4-47.2-33.2c-10.8-17.2-14.4-37.2-10-57.2 c4.4-19.6,16.4-36.4,33.2-47.2c20.4-13.2,46.4-15.2,69.2-6.4c1.6,0.8,3.2,1.2,4.8,2c0.4,0,10,5.2,17.2,12 C416.481,183.505,422.081,191.905,422.481,192.305z"
        ></path>{" "}
        <path d="M109.281,363.105c-25.2,0-46-20.8-46-46s20.8-46,46-46s46,20.8,46,46S134.881,363.105,109.281,363.105z M109.281,279.105 c-20.8,0-38,17.2-38,38s17.2,38,38,38s38-17.2,38-38C147.281,295.905,130.481,279.105,109.281,279.105z"></path>{" "}
        <path d="M115.681,425.505c-6.8,0-12.8-5.2-14-11.6l-1.6-8.4c-11.6-1.2-22.4-4.4-32.4-10l-6,6c-5.2,5.2-13.6,5.6-19.2,1.2l-4.8-4 c-5.6-4.4-6.8-13.2-2.8-19.2l4.8-7.2c-7.2-8.8-12.4-19.2-16-30h-8.8c-7.2,0-13.6-5.6-14.4-12.8l-0.4-6c-0.8-7.2,4.4-14,11.6-15.2 l8.8-1.6c1.2-11.2,4.8-22,10-32l-6.4-6.4c-5.2-5.2-5.6-13.6-1.2-19.2l4-4.8c4.4-5.6,13.2-6.8,19.2-2.8l7.6,5.2 c8.8-7.2,18.8-12.4,29.6-15.6v-9.2c0-7.2,5.6-13.6,12.8-14.4l6-0.4c7.2-0.8,14,4.4,15.2,11.6l1.6,9.2c11.2,1.2,22,4.4,32,9.6 l6.4-6.4c5.2-5.2,13.6-5.6,19.2-1.2l4.8,3.6c5.6,4.4,6.8,13.2,2.8,19.2l-5.2,7.6c7.2,8.8,12.4,18.8,16,29.6h8.8l0,0 c7.2,0,13.6,5.6,14.4,12.8l0.4,6c0.8,7.2-4.4,14-11.6,15.2l-8.4,1.6c-1.2,11.2-4.4,22.4-10,32.4l6,6c5.2,5.2,5.6,13.6,1.2,19.2 l-4,4.8c-4.4,5.6-13.2,6.8-19.2,2.8l-6.8-4.8c-8.8,7.2-19.2,12.8-30,16v8.4c0,7.2-5.6,13.6-12.8,14.4l-6,0.4 C116.481,425.505,116.081,425.505,115.681,425.505z M66.881,386.705c0.8,0,1.2,0,2,0.4c10.8,6.4,22.4,10,34.8,10.8 c2,0,3.2,1.6,3.6,3.2l2,11.2c0.4,3.2,3.6,5.2,6.8,5.2l6-0.4c3.2-0.4,5.6-3.2,5.6-6.4v-11.6c0-2,1.2-3.6,2.8-4 c12-3.2,22.8-8.8,32.4-17.2c1.2-1.2,3.6-1.2,4.8-0.4l9.6,6.8c2.4,1.6,6.4,1.2,8.4-1.2l4-4.8c2-2.4,1.6-6.4-0.4-8.4l-8.4-8 c-1.2-1.2-1.6-3.2-0.8-4.8c6-10.8,9.6-22.8,10.4-34.8c0-2,1.6-3.2,3.2-3.6l11.6-2c3.2-0.4,5.2-3.6,5.2-6.8l-0.4-6 c-0.4-3.2-3.2-5.6-6.4-5.6h-12c-2,0-3.6-1.2-4-2.8c-3.2-12-8.8-22.4-17.2-32c-1.2-1.2-1.2-3.6-0.4-4.8l6.8-10 c1.6-2.4,1.2-6.4-1.2-8.4l-4.8-3.6c-2.4-2-6.4-1.6-8.4,0.4l-8.4,8.8c-1.2,1.2-3.2,1.6-4.8,0.8c-10.8-6-22.4-9.6-34.4-10.4 c-2,0-3.2-1.6-3.6-3.2l-2-12c-0.4-3.2-3.6-5.6-6.8-5.2l-6,0.4c-3.2,0.4-5.6,3.2-5.6,6.4v12.4c0,2-1.2,3.6-2.8,4 c-12,3.2-22.4,8.8-32,16.8c-1.2,1.2-3.2,1.2-4.8,0.4l-10-6.8c-2.4-1.6-6.4-1.2-8.4,1.2l-4,4.8c-2,2.4-1.6,6.4,0.4,8.4l8.8,8.4 c1.2,1.2,1.6,3.2,0.8,4.8c-6,10.8-10,22.4-10.8,34.4c0,2-1.6,3.2-3.2,3.6l-11.6,2c-3.2,0.4-5.2,3.6-5.2,6.8l0.4,6 c0.4,3.2,3.2,5.6,6.4,5.6h12l0,0c2,0,3.6,1.2,4,2.8c3.2,12,8.8,22.8,16.8,32.4c1.2,1.2,1.2,3.6,0.4,4.8l-6.8,9.6 c-1.6,2.4-1.2,6.4,1.2,8.4l4.8,4c2.4,2,6.4,1.6,8.4-0.4l8-8.4C64.481,387.105,65.681,386.705,66.881,386.705z"></path>{" "}
        <path d="M358.481,314.305c-6,0-12-0.8-18-2c-21.2-4.8-39.6-17.6-51.2-36c-11.6-18.4-15.6-40.4-10.8-61.6s17.6-39.6,36-51.2 c22.4-14,50-16.4,74.4-6.8c1.6,0.8,3.6,1.6,5.2,2.4c2,0.8,2.8,3.2,2,5.2s-3.2,2.8-5.2,2c-1.6-0.8-3.2-1.6-4.8-2 c-22-8.8-47.2-6.8-67.2,6c-16.8,10.4-28,26.8-32.4,46s-0.8,38.8,9.6,55.6c10.4,16.8,26.8,28,46,32.4s38.8,0.8,55.6-9.6 s28-26.8,32.4-46s0.8-38.8-9.6-55.6c-1.2-2-0.8-4.4,1.2-5.6s4.4-0.8,5.6,1.2c11.6,18.4,15.6,40.4,10.8,61.6s-17.6,39.6-36,51.2 C388.881,309.905,374.081,314.305,358.481,314.305z"></path>{" "}
        <path d="M366.881,382.305c-8.4,0-16.4-6.4-18-14.8l-2.4-12.8c-16.4-1.6-32.4-6.4-46.8-14.4l-9.2,9.2c-6.4,6.8-17.6,7.2-24.8,1.2 l-6.4-5.2c-7.2-6-8.8-16.8-3.2-24.4l7.6-10.8c-10.4-12.8-18.4-27.6-22.8-43.2h-13.2c0,0,0,0-0.4,0c-9.2,0-17.2-7.2-18-16.4l-0.8-8.4 c-0.8-9.2,6-18,14.8-19.6l13.2-2.4c1.6-16,6.4-32,14.4-46.4l-10-9.6c-6.8-6.4-7.2-17.6-1.2-24.8l5.2-6.4c6-7.2,16.8-8.8,24.4-3.2 l11.2,8c12.8-10.4,27.2-18,42.8-22.4v-14c0-9.2,7.2-17.6,16.4-18.4l8.4-0.8c9.2-0.8,18,6,19.6,14.8l2.4,13.6 c16.4,1.6,31.6,6.4,46,14l9.6-10c6.4-6.8,17.6-7.2,24.8-1.2l6.4,5.2c7.2,6,8.8,16.8,3.2,24.4l-8,11.2c10.4,12.4,18.4,27.2,22.8,42.8 h13.6l0,0c0,0,0,0,0.4,0c9.2,0,17.2,7.2,18,16.4l0.8,8.4c0.8,9.2-6,18-14.8,19.6l-13.2,2.4c-1.6,16.4-6.4,32.4-14,46.8l9.6,9.2 c6.8,6.4,7.2,17.6,1.2,24.8l-5.2,6.4c-6,7.2-16.8,8.8-24.4,3.2l-10.8-7.6c-12.8,10.8-27.6,18.4-43.2,23.2v12.8 c0,9.2-7.2,17.6-16.4,18.4l-8.4,0.8C368.081,382.305,367.681,382.305,366.881,382.305z M298.881,331.105c0.8,0,1.2,0,2,0.4 c15.2,8.8,32,14,49.2,15.2c2,0,3.2,1.6,3.6,3.2l2.8,15.6c0.8,5.2,6,8.8,11.2,8.4l8.4-0.8c5.2-0.4,9.2-5.2,9.2-10.4l-0.4-16 c0-2,1.2-3.6,2.8-4c16.8-4.4,32.4-12.8,45.6-24.4c1.2-1.2,3.6-1.2,4.8-0.4l13.2,9.2c4,2.8,10.4,2,13.6-2l5.2-6.4 c3.2-4,2.8-10.4-0.8-14l-11.6-11.2c-1.2-1.2-1.6-3.2-0.8-4.8c8.8-14.8,13.6-32,14.8-49.2c0-2,1.6-3.2,3.2-3.6l16-2.8 c5.2-0.8,8.8-6,8.4-11.2l-0.8-8.4c-0.4-5.2-5.2-9.2-10.4-9.2l-16.4,0.4c-2,0-3.6-1.2-4-2.8c-4.4-16.8-12.8-32-24-44.8 c-1.2-1.2-1.2-3.6-0.4-4.8l9.6-13.6c2.8-4,2-10.4-2-13.6l-6.4-5.2c-4-3.2-10.4-2.8-14,0.8l-12,12c-1.2,1.2-3.2,1.6-4.8,0.8 c-15.2-8.8-31.2-13.6-48.4-14.8c-2,0-3.2-1.6-3.6-3.2l-2.8-16.8c-0.8-5.2-6-8.8-11.2-8.4l-8.4,0.8c-5.2,0.4-9.2,5.2-9.2,10.4 l0.4,16.8c0,2-1.2,3.6-2.8,4c-16.8,4.4-31.6,12.4-44.8,23.6c-1.2,1.2-3.6,1.2-4.8,0.4l-14-9.6c-4-2.8-10.4-2-13.6,2l-5.2,6.4 c-3.2,4-2.8,10.4,0.8,13.6l12,11.6c1.2,1.2,1.6,3.2,0.8,4.8c-8.8,14.8-14,31.6-15.2,48.8c0,2-1.6,3.2-3.2,3.6l-16.4,2.8 c-5.2,0.8-8.8,6-8.4,11.2l0.8,8.4c0.4,5.2,5.2,9.2,10.4,9.2l16.4-0.4c2,0,3.6,1.2,4,2.8c4.4,16.8,12.8,32.4,24,45.6 c1.2,1.2,1.2,3.2,0.4,4.8l-9.2,13.2c-2.8,4-2,10.4,2,13.6l6.4,5.2c4,3.2,10.4,2.8,14-0.8l11.2-11.6 C296.881,331.505,298.081,331.105,298.881,331.105z"></path>{" "}
      </g>
    </svg>
  ),
};
